<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ShrekChat - Сообщения</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
  </head>
  <body>
    <!-- Main Chat Interface Container -->
    <div class="chat-container">
      <!-- Sidebar with contacts -->
      <div class="sidebar">
        <div class="sidebar-header">
          <div class="burger-menu" id="profileButton">
            <i class="fas fa-bars"></i>
          </div>
          <div class="sidebar-actions">
            <div class="search-container">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Search" />
            </div>
          </div>
        </div>
        <div class="contacts-list" id="contactsList">
          <!-- Contacts will be loaded dynamically -->
          <div class="no-contacts-message" id="noContactsMessage">
            <p>No contacts yet. Add friends to start chatting!</p>
          </div>
        </div>
      </div>

      <!-- Main chat area -->
      <div class="chat-area">
        <!-- Welcome message for when no chat is selected -->
        <div class="welcome-container" id="welcomeContainer">
          <img src="images/shrek-logo.png" alt="ShrekChat Logo" />
          <h2>Добро пожаловать в ShrekChat</h2>
          <p>Выберите контакт, чтобы начать общение</p>
        </div>

        <!-- Chat content - will be hidden when no chat is selected -->
        <div class="chat-content" id="chatContent" style="display: none">
          <div class="chat-header">
            <div class="chat-contact-info">
              <div class="contact-avatar">
                <img src="images/donkey.jpg" alt="Donkey" />
                <span class="status online"></span>
              </div>
              <div>
                <div class="contact-name">Donkey</div>
                <div class="contact-status">Online</div>
              </div>
            </div>
            <div class="chat-actions">
              <i class="fas fa-phone"></i>
              <i class="fas fa-video"></i>
              <div class="dropdown">
                <i class="fas fa-ellipsis-v dropdown-toggle"></i>
                <div class="dropdown-menu">
                  <div class="dropdown-item" id="deleteAllMessages">
                    <i class="fas fa-trash"></i>
                    <span>Delete all messages</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="messages-container">
            <!-- Messages will be loaded dynamically -->
          </div>

          <div class="input-area">
            <i class="fas fa-paperclip"></i>
            <input
              type="text"
              placeholder="Type a message..."
              id="messageInput"
            />
            <button type="button" class="send-button">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- ======= SIDEBARS ======= -->
    <!-- Profile sidebar -->
    <div class="profile-sidebar" id="profileSidebar">
      <div class="profile-header">
        <div class="close-profile">
          <i class="fas fa-arrow-left"></i>
        </div>
        <h2>Настройки</h2>
      </div>

      <div class="profile-content">
        <div class="profile-section">
          <div class="profile-picture">
            <img
              src="images/shrek-logo.png"
              alt="Profile Picture"
              id="profilePicture"
            />
          </div>
          <div class="profile-name" id="profileName"></div>
          <div class="profile-status" id="profileStatus"></div>
        </div>

        <div class="profile-menu">
          <div class="menu-item">
            <i class="fas fa-user"></i>
            <span>Мой профиль</span>
          </div>
          <div class="menu-item">
            <i class="fas fa-users"></i>
            <span>Новая группа</span>
          </div>
          <div class="menu-item">
            <i class="fas fa-user-plus"></i>
            <span>Добавить друга</span>
          </div>
          <div class="menu-item">
            <i class="fas fa-moon"></i>
            <span>Тема</span>
            <label class="theme-switch">
              <input type="checkbox" id="themeToggle" />
              <span class="slider round"></span>
            </label>
          </div>
          <div class="menu-item">
            <i class="fas fa-user-friends"></i>
            <span>Пригласить друзей</span>
          </div>
          <div class="menu-item logout">
            <i class="fas fa-sign-out-alt"></i>
            <span>Выйти</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Overlay for when sidebar or popup is active -->
    <div class="overlay" id="overlay"></div>

    <!-- ======= POPUPS ======= -->
    <!-- User Profile Edit Popup -->
    <div class="popup" id="editProfilePopup">
      <div class="popup-header">
        <h2>Редактирование профиля</h2>
        <i class="fas fa-times close-popup"></i>
      </div>
      <div class="popup-content">
        <div class="profile-edit-avatar">
          <img
            src="images/shrek-logo.png"
            alt="Your Profile"
            id="profileEditAvatar"
          />
          <div class="edit-avatar-overlay">
            <i class="fas fa-camera"></i>
          </div>
        </div>
        <div class="popup-form">
          <div class="form-group">
            <label>Имя</label>
            <input type="text" id="profileEditName" placeholder="Ваше имя" />
          </div>
          <div class="form-group">
            <label>Email</label>
            <input type="email" id="profileEditEmail" placeholder="Ваш email" />
          </div>
          <div class="form-group">
            <label>Телефон</label>
            <div class="phone-input-container">
              <select id="countryCode">
                <option value="+7">+7 (Россия)</option>
                <option value="+1">+1 (США/Канада)</option>
                <option value="+44">+44 (Великобритания)</option>
                <option value="+49">+49 (Германия)</option>
                <option value="+33">+33 (Франция)</option>
                <option value="+86">+86 (Китай)</option>
                <option value="+81">+81 (Япония)</option>
              </select>
              <input
                type="tel"
                id="profileEditPhone"
                placeholder="Номер телефона"
              />
            </div>
          </div>
          <div class="form-group">
            <label>Страна</label>
            <select id="profileEditCountry">
              <option value="swamp" selected>Болото</option>
              <option value="faraway">Далеко-далеко</option>
              <option value="duloc">Дюлок</option>
              <option value="russia">Россия</option>
              <option value="usa">США</option>
              <option value="uk">Великобритания</option>
              <option value="germany">Германия</option>
              <option value="france">Франция</option>
            </select>
          </div>
          <button class="btn-green" id="saveProfileButton">
            Сохранить изменения
          </button>
        </div>
      </div>
    </div>

    <!-- Add Friends Popup -->
    <div class="popup" id="addFriendsPopup">
      <div class="popup-header">
        <h2>Добавить друга</h2>
        <i class="fas fa-times close-popup"></i>
      </div>
      <div class="popup-content">
        <div class="popup-form">
          <div class="form-group">
            <label>Имя пользователя или email</label>
            <input
              type="text"
              id="addFriendInput"
              placeholder="Введите имя пользователя или email"
            />
          </div>
          <button class="btn-green" id="addFriendButton">
            Добавить в друзья
          </button>
        </div>
      </div>
    </div>

    <!-- Group Management Popups -->
    <!-- Create Group - Member Selection Popup -->
    <div class="popup" id="createGroupMembersPopup">
      <div class="popup-header">
        <h2>Создать группу</h2>
        <i class="fas fa-times close-popup"></i>
      </div>
      <div class="popup-content">
        <h3>Выберите участников</h3>
        <div class="members-list">
          <!-- Group members will be loaded dynamically -->
        </div>
        <div class="popup-actions">
          <button class="btn-green btn-outline">Отмена</button>
          <button class="btn-green" id="goToGroupDetails">Далее</button>
        </div>
      </div>
    </div>

    <!-- Create Group - Group Details Popup -->
    <div class="popup" id="createGroupDetailsPopup">
      <div class="popup-header">
        <h2>Создать группу</h2>
        <i class="fas fa-times close-popup"></i>
      </div>
      <div class="popup-content">
        <div class="group-avatar-upload">
          <div class="group-avatar">
            <img src="images/group-default.jpg" alt="Group Avatar" />
            <div class="edit-avatar-overlay">
              <i class="fas fa-camera"></i>
            </div>
          </div>
        </div>
        <div class="popup-form">
          <div class="form-group">
            <label>Название группы</label>
            <input type="text" placeholder="Введите название группы" />
          </div>
          <div class="form-group">
            <label>Описание группы</label>
            <textarea placeholder="Введите описание группы"></textarea>
          </div>
          <div class="popup-actions">
            <button class="btn-green btn-outline" id="backToGroupMembers">
              Назад
            </button>
            <button class="btn-green">Создать</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Group Members List Popup -->
    <div class="popup" id="groupMembersPopup">
      <div class="popup-header">
        <h2>Болотная банда</h2>
        <i class="fas fa-times close-popup"></i>
      </div>
      <div class="popup-content">
        <div class="group-info">
          <div class="group-avatar">
            <img src="images/group-default.jpg" alt="Group Avatar" />
          </div>
          <div class="members-count">4 участника</div>
        </div>
        <div class="popup-actions admin-actions">
          <button class="btn-green btn-icon">
            <i class="fas fa-user-plus"></i> Добавить участников
          </button>
          <button class="btn-red btn-icon">
            <i class="fas fa-trash"></i> Удалить группу
          </button>
        </div>
        <h3>Участники</h3>
        <div class="group-members-list">
          <!-- Group members will be loaded dynamically -->
        </div>
      </div>
    </div>

    <!-- User Profile View Popup -->
    <div class="popup" id="viewProfilePopup">
      <div class="popup-header">
        <h2>Профиль пользователя</h2>
        <i class="fas fa-times close-popup"></i>
      </div>
      <div class="popup-content">
        <div class="profile-view">
          <div class="profile-view-avatar">
            <img src="images/donkey.jpg" alt="Donkey" />
          </div>
          <h3>Donkey</h3>
          <div class="profile-view-info">
            <div class="info-item">
              <span class="info-label">Email:</span>
              <span class="info-value">donkey@swamp.com</span>
            </div>
            <div class="info-item">
              <span class="info-label">Телефон:</span>
              <span class="info-value">+7 (123) 456-7891</span>
            </div>
            <div class="info-item">
              <span class="info-label">Страна:</span>
              <span class="info-value">Болото</span>
            </div>
          </div>
          <div class="popup-actions">
            <button class="btn-green btn-outline">Закрыть</button>
            <button class="btn-green">Написать сообщение</button>
          </div>
        </div>
      </div>
    </div>

    <script src="js/messages.js"></script>
    <script src="js/chat.js"></script>
    <script src="js/addFriend.js"></script>
  </body>
</html>
